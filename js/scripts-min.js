const products=[{id:1,name:"Смартфон XTech Pro",price:29990,image:"images/product1-large.jpg"},{id:2,name:"Ноутбук GameBook Ultra",price:89990,image:"images/product2-large.jpg"},{id:3,name:"Наушники AudioMax",price:12990,image:"images/product3-large.jpg"},{id:4,name:"Планшет TabPro",price:45990,image:"images/product4-large.jpg"},{id:5,name:"Умные часы WatchSmart",price:19990,image:"images/product5-large.jpg"},{id:6,name:"Экшн-камера ActionPro",price:24990,image:"images/product6-large.jpg"}],cartData={items:[],total:0,count:0};function initializeWebsite(){console.log("Инициализация сайта...");const t=document.querySelector(".header"),e=document.querySelector(".navigation"),a=document.querySelector(".hero-banner"),n=document.querySelector(".products-section"),o=document.querySelector("footer");t&&e&&a&&n&&o&&(console.log("Все секции найдены"),t.style.opacity="1",e.style.opacity="1",a.style.opacity="1",n.style.opacity="1",o.style.opacity="1")}function setupEventListeners(){window.addEventListener("scroll",handleScroll),window.addEventListener("resize",handleResize),document.addEventListener("click",function(t){"BUTTON"===t.target.tagName&&(console.log("Кнопка нажата: ",t.target.textContent),t.target.style.transform="scale(0.95)",setTimeout(function(){t.target.style.transform="scale(1)"},150))})}function scrollToProducts(){console.log("Прокрутка к товарам");const t=document.getElementById("products");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}function addToCart(e){console.log("Добавление товара в корзину: "+e);var t=products.find(function(t){return t.id===e});if(t){const a=cartData.items.find(function(t){return t.id===e});a?a.quantity+=1:cartData.items.push({id:t.id,name:t.name,price:t.price,quantity:1,image:t.image}),updateCartDisplay(),showNotification("Товар добавлен в корзину!")}}function updateCartDisplay(){cartData.total=cartData.items.reduce(function(t,e){return t+e.price*e.quantity},0),cartData.count=cartData.items.reduce(function(t,e){return t+e.quantity},0),console.log("Обновление отображения корзины. Товаров: "+cartData.count+", Сумма: "+cartData.total)}function handleScroll(){var t=window.pageYOffset||document.documentElement.scrollTop;const e=document.querySelector(".header");e&&(t=Math.min(t/100,1),e.style.backgroundColor="rgba(255, 255, 255, "+t+")")}function handleResize(){console.log("Изменение размера окна"),window.innerWidth<768?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}function showNotification(t){const e=document.createElement("div");e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.background="#28a745",e.style.color="white",e.style.padding="15px 20px",e.style.borderRadius="5px",e.style.zIndex="9999",e.style.fontWeight="bold",e.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",e.style.transform="translateX(100%)",e.style.transition="transform 0.3s ease",e.textContent=t,document.body.appendChild(e),setTimeout(function(){e.style.transform="translateX(0)"},100),setTimeout(function(){e.style.transform="translateX(100%)",setTimeout(function(){document.body.contains(e)&&document.body.removeChild(e)},300)},3e3)}document.addEventListener("DOMContentLoaded",function(){console.log("DOM загружен"),initializeWebsite(),setupEventListeners(),updateCartDisplay()});var cartInstance={items:[],total:0,count:0,isVisible:!1,element:null};function initializeCart(){console.log("Инициализация корзины..."),createCartElement(),loadCartFromStorage(),updateCartCounter(),setupCartEvents()}function createCartElement(){document.body.insertAdjacentHTML("beforeend",'<div id="shopping-cart" class="cart-sidebar"><div class="cart-header"><h3>Корзина покупок</h3><button class="close-cart" onclick="closeCart()">&times;</button></div><div class="cart-items-list"></div><div class="cart-footer"><div class="cart-total"><strong>Итого: <span id="cart-total-amount">0</span> ₽</strong></div><button class="checkout-btn" onclick="proceedToCheckout()">Оформить заказ</button></div></div><div class="cart-overlay" onclick="closeCart()"></div>'),cartInstance.element=document.getElementById("shopping-cart");var t=document.createElement("style");t.textContent=".cart-sidebar {position: fixed;right: -400px;top: 0;width: 400px;height: 100vh;background: white;box-shadow: -5px 0 15px rgba(0,0,0,0.1);z-index: 9999;transition: right 0.3s ease;display: flex;flex-direction: column;}.cart-sidebar.active {right: 0;}.cart-overlay {position: fixed;top: 0;left: 0;width: 100vw;height: 100vh;background: rgba(0,0,0,0.5);z-index: 9998;opacity: 0;visibility: hidden;transition: all 0.3s ease;}.cart-overlay.active {opacity: 1;visibility: visible;}.cart-header {padding: 20px;border-bottom: 1px solid #eee;display: flex;justify-content: space-between;align-items: center;}.close-cart {background: none;border: none;font-size: 24px;cursor: pointer;}.cart-items-list {flex: 1;overflow-y: auto;padding: 20px;}.cart-footer {padding: 20px;border-top: 1px solid #eee;}.checkout-btn {width: 100%;padding: 15px;background: #007bff;color: white;border: none;border-radius: 5px;font-size: 16px;cursor: pointer;margin-top: 10px;}",document.head.appendChild(t)}function addItemToCart(t){console.log("Добавление товара в корзину: "+t);var e=findProductById(t);e?((t=findCartItem(t))?(t.quantity+=1,console.log("Увеличено количество товара: "+e.name)):(cartInstance.items.push({id:e.id,name:e.name,price:e.price,quantity:1,image:e.image}),console.log("Новый товар добавлен: "+e.name)),updateCartDisplay(),saveCartToStorage(),showCartNotification("Товар добавлен в корзину!"),animateCartIcon()):console.error("Товар не найден")}function removeItemFromCart(t){for(var e,a=-1,n=0;n<cartInstance.items.length;n++)if(cartInstance.items[n].id===t){a=n;break}-1<a&&(e=cartInstance.items.splice(a,1)[0],console.log("Товар удален из корзины: "+e.name),updateCartDisplay(),saveCartToStorage(),showCartNotification("Товар удален из корзины"))}function updateItemQuantity(t,e){var a=findCartItem(t);a&&(e<=0?removeItemFromCart(t):(a.quantity=e,updateCartDisplay(),saveCartToStorage()))}function findProductById(t){for(var e=0;e<products.length;e++)if(products[e].id===t)return products[e];return null}function findCartItem(t){for(var e=0;e<cartInstance.items.length;e++)if(cartInstance.items[e].id===t)return cartInstance.items[e];return null}function updateCartDisplay(){updateCartCounter(),updateCartTotal(),renderCartItems()}function updateCartCounter(){for(var t=cartInstance.count=0;t<cartInstance.items.length;t++)cartInstance.count+=cartInstance.items[t].quantity;var e=document.querySelector(".cart-counter");e&&(e.textContent=cartInstance.count,e.style.display=0<cartInstance.count?"block":"none")}function updateCartTotal(){for(var t=cartInstance.total=0;t<cartInstance.items.length;t++)cartInstance.total+=cartInstance.items[t].price*cartInstance.items[t].quantity;var e=document.getElementById("cart-total-amount");e&&(e.textContent=formatPrice(cartInstance.total))}function renderCartItems(){var t=document.querySelector(".cart-items-list");if(t)if(0!==cartInstance.items.length){for(var e="",a=0;a<cartInstance.items.length;a++){var n=cartInstance.items[a];e+='<div class="cart-item" data-id="'+n.id+'"><img src="'+n.image+'" alt="'+n.name+'" class="cart-item-image"><div class="cart-item-details"><h4>'+n.name+'</h4><p class="cart-item-price">'+formatPrice(n.price)+' ₽</p><div class="quantity-controls"><button onclick="updateItemQuantity('+n.id+", "+(n.quantity-1)+')">-</button><span>'+n.quantity+'</span><button onclick="updateItemQuantity('+n.id+", "+(n.quantity+1)+')">+</button></div></div><button class="remove-item" onclick="removeItemFromCart('+n.id+')">×</button></div>'}t.innerHTML=e}else t.innerHTML="<p>Корзина пуста</p>"}function formatPrice(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function showCart(){cartInstance.element.classList.add("active"),document.querySelector(".cart-overlay").classList.add("active"),cartInstance.isVisible=!0,document.body.style.overflow="hidden"}function closeCart(){cartInstance.element.classList.remove("active"),document.querySelector(".cart-overlay").classList.remove("active"),cartInstance.isVisible=!1,document.body.style.overflow=""}function clearCart(){cartInstance.items=[],cartInstance.total=0,cartInstance.count=0,updateCartDisplay(),saveCartToStorage(),showCartNotification("Корзина очищена")}function saveCartToStorage(){try{localStorage.setItem("shopping-cart",JSON.stringify(cartInstance.items))}catch(t){console.error("Ошибка сохранения корзины:",t)}}function loadCartFromStorage(){try{var t=localStorage.getItem("shopping-cart");t&&(cartInstance.items=JSON.parse(t),updateCartDisplay())}catch(t){console.error("Ошибка загрузки корзины:",t)}}function setupCartEvents(){document.addEventListener("keydown",function(t){"Escape"===t.key&&cartInstance.isVisible&&closeCart()})}function animateCartIcon(){var t=document.querySelector(".cart-icon");t&&(t.style.transform="scale(1.2)",t.style.transition="transform 0.2s ease",setTimeout(function(){t.style.transform="scale(1)"},200))}function showCartNotification(t){"function"==typeof showNotification&&showNotification(t)}function proceedToCheckout(){0!==cartInstance.items.length?alert("Переход к оформлению заказа...Товаров в корзине: "+cartInstance.count+"Общая сумма: "+formatPrice(cartInstance.total)+" ₽"):alert("Корзина пуста!")}function initializeAnimations(){console.log("Инициализация анимаций..."),setupScrollAnimations(),setupHoverAnimations(),setupLoadAnimations(),setupClickAnimations()}function setupScrollAnimations(){var n=document.querySelectorAll("[data-animation]");window.addEventListener("scroll",function(){for(var t=0;t<n.length;t++){var e=n[t];if(e.getBoundingClientRect().top<window.innerHeight-50){var a=e.getAttribute("data-animation");switch(e.classList.add(a),a){case"fadeIn":e.style.opacity="1",e.style.transform="translateY(0)";break;case"slideUp":e.style.transform="translateY(0)",e.style.opacity="1";break;case"zoomIn":e.style.transform="scale(1)",e.style.opacity="1"}}}})}function setupHoverAnimations(){for(var t=document.querySelectorAll(".product-card"),e=0;e<t.length;e++)t[e].addEventListener("mouseenter",function(t){t.target.style.transform="translateY(-10px) scale(1.02)",t.target.style.boxShadow="0 20px 40px rgba(0,0,0,0.15)",t.target.style.transition="all 0.4s ease";var e=t.target.querySelector(".product-image");e&&(e.style.transform="scale(1.1)");t=t.target.querySelector(".add-to-cart");t&&(t.style.background="#218838")}),t[e].addEventListener("mouseleave",function(t){t.target.style.transform="translateY(0) scale(1)",t.target.style.boxShadow="0 10px 30px rgba(0,0,0,0.1)";var e=t.target.querySelector(".product-image");e&&(e.style.transform="scale(1)");t=t.target.querySelector(".add-to-cart");t&&(t.style.background="#28a745")})}function setupLoadAnimations(){setTimeout(function(){var t=document.querySelector(".header");t&&(t.style.opacity="0",t.style.transform="translateY(-50px)",t.style.transition="all 1s ease",setTimeout(function(){t.style.opacity="1",t.style.transform="translateY(0)"},500));var e=document.querySelector(".hero-content");e&&(e.style.opacity="0",e.style.transform="scale(0.8)",e.style.transition="all 1.2s ease",setTimeout(function(){e.style.opacity="1",e.style.transform="scale(1)"},800))},100)}function setupClickAnimations(){for(var t=document.querySelectorAll("button, .cta-button, .add-to-cart"),e=0;e<t.length;e++)t[e].addEventListener("click",function(t){var e=document.createElement("span");e.style.position="absolute",e.style.borderRadius="50%",e.style.backgroundColor="rgba(255,255,255,0.6)",e.style.transform="scale(0)",e.style.animation="ripple-animation 0.6s linear",e.style.pointerEvents="none";var a=t.target.getBoundingClientRect(),n=Math.max(a.width,a.height);e.style.width=n+"px",e.style.height=n+"px",e.style.left=t.clientX-a.left-n/2+"px",e.style.top=t.clientY-a.top-n/2+"px",t.target.style.position="relative",t.target.appendChild(e),setTimeout(function(){e.remove()},600)});var a=document.createElement("style");a.textContent="@keyframes ripple-animation {to {transform: scale(2);opacity: 0;}}",document.head.appendChild(a)}function animateCounter(a,n,o,r){var i=null,c=function(t){i=i||t;var e=Math.min((t-i)/r,1),t=Math.floor(e*(o-n)+n);a.textContent=t,e<1&&window.requestAnimationFrame(c)};window.requestAnimationFrame(c)}function createFloatingElements(){for(var t=0;t<10;t++){var e=document.createElement("div");e.style.position="fixed",e.style.width=10*Math.random()+5+"px",e.style.height=10*Math.random()+5+"px",e.style.background="rgba(0, 123, 255, 0.3)",e.style.borderRadius="50%",e.style.pointerEvents="none",e.style.zIndex="1",e.style.left=100*Math.random()+"vw",e.style.top=100*Math.random()+"vh",e.style.animation="float-animation "+(10*Math.random()+5)+"s infinite linear",document.body.appendChild(e)}var a=document.createElement("style");a.textContent="@keyframes float-animation {0% {transform: translateY(0px) rotate(0deg);opacity: 1;}50% {transform: translateY(-100px) rotate(180deg);opacity: 0.5;}100% {transform: translateY(-200px) rotate(360deg);opacity: 0;}}",document.head.appendChild(a)}function oldSlideShow(){var t=["image1.jpg","image2.jpg","image3.jpg"],e=0;setInterval(function(){e=(e+1)%t.length,console.log("Переключение на изображение: "+t[e])},3e3)}function deprecatedParallax(){window.addEventListener("scroll",function(){for(var t=window.pageYOffset,e=document.querySelectorAll(".parallax"),a=0;a<e.length;a++){var n=e[a].dataset.speed||.5;e[a].style.transform="translateY("+t*n+"px)"}})}document.addEventListener("DOMContentLoaded",function(){setTimeout(initializeCart,1e3)});